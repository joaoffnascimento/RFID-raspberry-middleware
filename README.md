# RFID raspberry middleware

Implementation of a message broker, using the mini computer rasberry pi, an rfid module MFRC522.

Communication via topics using MQTT - AWS IoT Core, storing read logs in the AWS DynamoDB non-relational fast bank.

Software implemented using Python 3, within the project are the libraries and SDK needed for operation.

More details on the implementation, configuration, and execution of the project can be found below.
![Logo](https://i.ibb.co/JrCjtGb/IMG-20211212-141045.jpg)

## Installation

To complete service execution, you'll need to have an AWS account, create and configure a new thing on AWS IoT and set up a collection in DynamoDB. Please note: All access to AWS will be your responsibility!

First clone the repository that contains the project:

```bash
git clone https://github.com/joaoffnascimento/RFID-raspberry-middleware.git
```

After you clone the repository, you'll need to create a folder called **aws-credentials**, it can stay in the location of your choice. Within the created folder will be entered all credentials generated by you in the AWS console, respective to each service used (DynamoDB and AWS Iot Core)

When you open the project, within the file called index, you will find the following method: configureCredentials, as parameters it receives respectively the keys:

- AmazonRootCA1.pem;
- private.pem.key;
- certificate.pem.crt

Considering the configuration of cloned project folders, the folder called aws-credentials is at: /home/pi/aws-credentials

Other settings:

- DynamoDB table name: `log = dynamodb.Table('log')`

- Message broker topic name: `topic = "home/tag-touch-events"`

## Execution

When performing all the necessary settings, enter the cloned project folder, enter the src folder and run the file called index.py using the command: `python3 index.py`

You should view this return of the application:

```shell
Starting Realtime Data Transfer From Raspberry Pi...
Connected to topic: home/tag-touch-events
Local: CBSI
```

![execution-example](https://i.ibb.co/rmDFG58/execution-return.png)

When you bring an rfid tag closer to the reader, the following message will be written to the application log:

```shell
TAG Detected!
TAG saved!
Publishing MQTT Message from RaspberryPI on topic home/tag-touch-events
```

![read-tag-example](https://i.ibb.co/vJ6Mkkx/read-tag.png)

## Demo

DynamoDB saved read log example

![aws-dynamodb](https://i.ibb.co/YjPCrFX/Screenshot-from-2021-12-12-15-02-08.png)

Capture message sent in home/tag-touch-events topic example

![aws-mqtt](https://i.ibb.co/5j4Wt3L/Screenshot-from-2021-12-12-15-06-20.png)
